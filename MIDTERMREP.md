# DDLChecker - ��� - 中期报告

队名: `���` (可读作 `\uFFFD` `锟斤拷`  `乱码` etc.) 

队员:  杜凌霄 (队长)  黄梓彦  凌翊宸  李薛成

Github Organization: [NJU-EL2022-uFFFD](https://github.com/NJU-EL2022-uFFFD)

## 作品目标

**DDLChecker** (暂定) , 顾名思义, 是一个类似于`GTD `的`TodoList`型的小程序项目, 旨在**收集检查**并提醒学生们各个任务/作业的 Deadline (下简称 "DDL" ).

### 有何创新与区别?

由于当前大学生 (尤其是NJUer) 的 DDL **品类繁杂**, **数量繁多**, **渠道繁复**, 经常会因为各种原因错过 DDL, 故我们产生了着手这样一个项目的想法. 

当今市场上已经存在了许多 **TodoList** 类型的工具, 可是就算已经有很多类似的工具, 依旧有许多同学表示并不好用或没有效果. 

我们总结了其中的**原因**并提出了一些**解决方案**: 

1. 市面上的TodoList工具无法满足学生需求

   目前市场上并不存在（或者存在但并没有被大面积接受）**专门针对学生群体**的 TodoList 工具.在我们的调查中, 有许多同学表示他们当前使用的 TodoList 工具在某些方面无法满足他们的需求,如: **DDL 的日历视图和 DDL 的提醒功能缺失**. 因此我们决定实现一个**完全面向学生**的 TodoList , 对其功能做出一系列优化, 比如: **DDL 和课表和日历结合**, 方便学生对当前未完成的 DDL 的状况有一个清楚的判断, 进行更好的统筹规划; 再比如结合小程序使用微信通知的优势, 提供**更好的 DDL 提醒功能**. 

2. 忘记某个平台上的任务/作业

   我们探讨了个中缘由, 认为仅仅是**手动搜寻并记录 DDL** 就可能已经劝退大批用户, 或导致用户难以坚持长期记录来发挥 TodoList 的作用. 因此, 我们决定在我们的 **DDLChecker** 项目中, 添加最重要的一个功能, 即**定时自动抓取/收集/检查 DDL **的功能. 该功能初步决定使用 **Python** 爬虫与 **NLP** 实现. 爬虫能获取诸如 **MOOC**, **超星尔雅**, **SPOC** 等作业网站上的 DDL , 自然语言处理是为了在接入**微信/QQ群聊**的API后分析**群公告/群作业~~/群精华消息/指定成员(如教师/助教)口头布置~~**的 DDL. 后期期望加入**社区DDL**功能, 即**同一大学同一教师教的同一门课的学生**共享同一个 DDL, 当然, 这需要一定的用户规模.

3. 没能做好时间的安排, 缺少监督和提醒

   **设想**: 让用户可以自己安排 DDL, 并使用图表的形式展现相关统计数据, 对 DDL 的耗时给出预估, 对延期率给出预估（月报周报的形式）.

### 以何种形式(使用的技术栈)?

我们的项目为**小程序形式**, 使用了 **Taro** 这一**开放式跨端跨框架解决方案**. 即可以使用**Web框架**写出跑在**多个平台上**的小程序. 

目前主体选择了**微信小程序**, 因为微信小程序用户基数大, 消息提醒及时/到位, 后端云函数接口方便/实惠, 安全性有保障. 

**前端**没有直接采用微信小程序的特有框架, 使用了 Taro 中的 **Vue3 + TypeScript 框架**,  较为新颖先进且可以多端共用, 总学习成本也有一定降低. 

**后端**为 **Flask** 编写.得益于 **Python** 的精简性和 **Flask** 对网络编程的强力支持, 并使用了不少针对 **Flask** 特有的库, 提升代码的精简度和可读性.

目前的项目**目录结构**于报告末尾**附录**, 可参考. 后期可能会根据**风格规范**进一步重构.

## 人员分工

前端: 李薛成; 凌翊宸 (前端接口/部分代码逻辑). 

后端: 杜凌霄; 黄梓彦 (数据库); 凌翊宸 (爬虫). 

## 当前进度

### 前端 (Taro - Vue3 - TypeScript)

如下图: (等待补充...)

### 后端 (Flask)

已完成 TodoList 的核心功能及 **HTTP API**, 完成部分能在云函数运行的爬虫程序.

### 数据库 (MySQL)

已完成相关的 **CRUD 数据层**. 

## 一些优点/技术亮点 (自卖自夸)

开发过程中全程使用 GitHub 进行**代码版本控制**, 使用 **DeepSource 平台**和**微信云托管**实现代码的质量检查和持续部署.

对于用户提交的账号密码使用微信平台提供的唯一 `ID` - `UnionID` 作为密钥进行 **AES 加密**, 在数据库中保存 `<UnionID哈希值>` - `<使用UnionID加密的账号密码>` 格式的键值对, 在实现爬虫功能的同时确保了只有用户主动使用小程序发起请求时账号密码才能被解密, 即使数据库内容泄露也能**保证用户信息安全**.

同时接入第三方验证码平台对登录相关接口进行保护, 防止滥用.

基于 **PaaS 架构**和**容器技术**开发, 无需独立的服务器, 弹性和可靠性强, 成本低.

计划使用 **NLP 技术(NER)** 从获取的文本格式提取出 DDL 相关信息(时限, 要求等).

给用户提供**开放 API 接口**以及 **WebHook** 回调, 允许进阶用户**自定义 Workflow**. 

开源爬虫部分代码, 接受 **Pull Request** 新增或优化爬虫逻辑.

## 问题与挑战 (寻找出路)

由于前期市场调研不充分导致可能存在市场需求不强烈. 

用户规模小导致社区功能难以上线. 

## 附录 - 项目结构

```
DDLChecker
├── backend                         后端目录
|   ├── app                         后端程序目录
|   |   ├── crawler                 爬虫组件目录
|   |   |   ├── auth                登录接口目录
|   |   |   └── fetch               爬虫接口目录
|   |   |
|   |   ├── db                      数据层目录
|   |   ├── routes                  后端API目录
|   |   ├── app.py                  后端程序入口
|   |   └── requirements.txt        依赖文件
|   |
|   ├── Dockerfile                  容器管理文件
|   └── README.md                   后端的读我!
|
├── frontend                        前端目录
|   ├── dist                        编译结果目录
|   ├── config                      项目编译配置目录
|   |   ├── index.js                默认配置
|   |   ├── dev.js                  开发环境配置
|   |   └── prod.js                 生产环境配置
|   |
|   ├── src                         源码目录
|   |   ├── assets                  资源文件目录
|   |   ├── components              组件文件目录
|   |   ├── pages                   页面文件目录
|   |   ├── types                   数据接口文件目录
|   |   ├── app.ts                  项目入口文件
|   |   ├── app.scss                项目总通用样式
|   |   ├── app.config.ts           项目入口配置
|   |   └── index.html              H5项目额外配置
|   | 
|   ├── project.config.json         微信小程序项目配置
|   ├── babel.config.js             Babel 配置
|   ├── tsconfig.json               TypeScript 配置
|   ├── .eslintrc                   ESLint 配置
|   ├── package.json                依赖文件
|   └── README.md                   前端的读我!
|
└── README.md                       总项目的读我!
```
